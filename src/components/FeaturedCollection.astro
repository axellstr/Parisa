---
// Featured collection section with 4 product items with swiper slides
import { ArrowRight } from 'lucide-astro';

// Define image pairs for each collection item (shuffled starting images)
const collectionItems = [
  {
    name: 'Turquoise Necklace',
    images: ['/images/product.jpg', '/images/display.jpg']
  },
  {
    name: 'Turquoise Bracelet', 
    images: ['/images/image-one.jpg', '/images/display.jpg']
  },
  {
    name: 'Turquoise Earrings',
    images: ['/images/bendo-one.jpg', '/images/image-two.jpg']
  },
  {
    name: 'Turquoise Ring',
    images: ['/images/bendo-two.jpg', '/images/product.jpg']
  }
];
---

<section class="featured-collection">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Featured Collection</h2>
    </div>
    
    <div class="collection-grid">
      {collectionItems.map((item, index) => (
        <div class="collection-item">
          <div class="item-image-container">
            <div class={`swiper featured-swiper-${index}`}>
              <div class="swiper-wrapper">
                {item.images.map((image, imgIndex) => (
                  <div class="swiper-slide">
                    <img src={image} alt={`Persian ${item.name} - Image ${imgIndex + 1}`} width="400" height="533" loading="lazy" />
                  </div>
                ))}
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <div class="item-info">
            <h3 class="item-name">{item.name} <ArrowRight size={16} class="arrow" /></h3>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @import "/src/styles/featured-collection.css";
</style>

<script>
  import { featuredCollectionSwiperConfig } from '../config/swiper.ts';
  
  // Initialize swiper for each featured collection item
  document.addEventListener('DOMContentLoaded', async () => {
    // Dynamically import Swiper
    const { Swiper } = await import('swiper');
    const { Pagination } = await import('swiper/modules');
    
    // Initialize each swiper instance
    for (let i = 0; i < 4; i++) {
      const swiperElement = document.querySelector(`.featured-swiper-${i}`) as HTMLElement;
      if (swiperElement) {
        new Swiper(swiperElement, {
          ...featuredCollectionSwiperConfig,
          modules: [Pagination],
          pagination: {
            el: `.featured-swiper-${i} .swiper-pagination`,
            type: 'bullets',
            clickable: true,
          },
        });
      }
    }
  });
</script>
